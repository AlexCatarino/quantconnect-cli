#!/usr/bin/env node

/* eslint-disable @typescript-eslint/no-var-requires */

const flush = require('@oclif/command/flush');
const handle = require('@oclif/errors/handle');
const { logger } = require('../lib/utils/logger');

require('@oclif/command')
  .run()
  .then(flush)
  .catch(err => {
    if (err.oclif && err.code !== 'EEXIT' && typeof err.render === 'function') {
      err.render = () => {
        logger.error(err.message);
        return null;
      };
    }

    return handle(err);
  });
